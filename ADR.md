# Рішення: Архітектура сервісу збору подій і API для метрик

**Дата:** 31.10.2025  

---

## Контекст 
Необхідно побудувати невеликий сервіс, який приймає події (events) від клієнтських застосунків, зберігає їх і надає прості аналітичні метрики через API.

**Основні вимоги:**
- Інтеграція через API.  
- Збереження подій із часовою міткою.  
- Можливість отримати базові метрики.

---

## Варіанти 
- **Варіант A:** Django REST Framework  
  **Переваги:** швидка реалізація API, ORM для БД, вбудована адмінка.  
  **Недоліки:** недоречний для маленького сервісу, бо важкий фреймворк і створює багато непотрібних процесів.

- **Варіант B:** Flask + SQLAlchemy  
  **Переваги:** мінімалістичний стек, висока швидкість розробки, легка інтеграція з будь-якою БД.  
  **Недоліки:** менше готових компонентів, потрібно самому налаштовувати структуру проєкту.

- **Варіант C:** FastAPI + PostgreSQL  
  **Переваги:** сучасний фреймворк із підтримкою асинхронності, автоматична OpenAPI-документація, хороша продуктивність.  
  **Недоліки:** складніше початкове налаштування, ніж у Django або Flask.

---

## Рішення 
Обрано **FastAPI + PostgreSQL**.

**Причини:**
- Підтримка асинхронних запитів дозволить масштабувати прийом великої кількості подій.  
- Автоматична генерація документації спростить використання API іншими командами.  
- PostgreSQL підходить для збереження подій з часовими мітками та фільтрації по них.

---

## Наслідки
- Необхідно налаштувати SQLAlchemy або ORM для роботи з PostgreSQL.  
- У майбутньому можна додати черги (Kafka або RabbitMQ) для обробки подій у реальному часі.  
- Поточне рішення дозволить швидко розгорнути MVP і надалі розширювати функціонал.
