# LEARNED — FastAPI + SQLite + Docker

## Засвоєно в процесі виконання
- Як створювати REST API з FastAPI та маршрути для POST/GET запросів.
- Використання SQLAlchemy для роботи з SQLite, включаючи сесії, ідемпотентність і агрегатні запити.
- Як робити когортний аналіз і базову аналітику (DAU, топ-события, retention).
- Організація тестів через pytest, використання fixture для ізоляції бази.
- Інтеграція FastAPI з Prometheus для базових метрик та rate limiting через slowapi.
- Docker-інтеграція та docker-compose для локального підйому сервісів та тестів.

## Як інтегрував(ла) у рішення
- **Де використано в коді:** 
  - `event_service/main.py` — маршрути API та lifespan для CSV імпорту.
  - `event_service/database.py` — SQLAlchemy engine, сесії та базові операції з SQLite.
  - `tests/` — pytest тести для аналітики та ідемпотентності.
  - `docker-compose.yml` — підйом FastAPI сервісів та запуск тестів у контейнерах.
  - Prometheus + Grafana для метрик та візуалізації.

## Плюси / Мінуси / Трейд-офи

**Плюси**
- Швидка розробка REST API з мінімальним кодом.
- SQLite простий для локальної розробки та тестів, легко переноситься.
- Docker дозволяє ізолювати середовище і запускати тести автоматично.

**Мінуси**
- SQLite обмежена для високонавантажених production середовищ.
- Prometheus та Grafana потребують додаткових контейнерів та конфігурації.
- Тестування у Docker трохи повільніше, ніж локально.

**Коли використовувати / коли уникати**
- Використовувати, якщо:
  - Потрібно швидко розробити PoC або MVP.
  - Сервіс невеликого масштабу з локальними базами даних.
  - Не потрібна складна багатокористувацька база або горизонтальне масштабування.

- Уникати, якщо:
  - Потрібна висока пропускна здатність або багатопоточність.
  - Складна аналітика на великих об’ємах даних.
  - Планується production з багатьма паралельними користувачами.
